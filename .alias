alias help-git='help-func'
alias squash='squash-func `git rev-parse --abbrev-ref HEAD`'
alias rebase='rebase-func `git rev-parse --abbrev-ref HEAD`'
alias utest-all='unit-all'
alias ftest-all='func-all'
alias utest='utest'
alias ftest='ftest'
alias refreshdb='refreshdb-func'
alias rebuild='rebuild-func'
alias fullbuild='fullbuild-func'
alias gohome='gohome-func'

function help-func {
	echo 
	echo Git helper commands
	echo -------------------
	echo 
	echo Common topic branch commands
	echo // To squash your commits into one
	echo 	squash
	echo // To fetch and rebase changes from master into branch
	echo 	rebase
	echo
	echo Basic git commands
	echo // Get the file change status
	echo 	git status
	echo
	echo // Create local branch 'my-branch'
	echo 	git checkout -b my-branch
	echo
	echo // Delete local branch 'my-branch'
	echo 	git branch -d my-branch
	echo
	echo // Add changes to the commit
	echo	git add --all
	echo 
	echo // Commit changes to local branch
	echo 	git commit
	echo
	echo // Commit changes to local branch by appending previous commit
	echo 	git commit --amend
	echo
	echo // Push local my-branch changes to server
	echo 	git push origin my-branch
	echo
	echo // Force push local my-branch changes to server
	echo 	git push -f origin my-branch
}

function squash-func {
	echo Squashing commits for brach: $1
	# switch to master branch
	git checkout master

	# ensure our master is up to date
	git pull origin master

	# switch to the branch
	git checkout $1

	# start the squash
	git rebase -i origin/master
}

function rebase-func {
	echo Rebasing commits for branch: $1
	# switch to master branch
	git checkout master

	# ensure our master is up to date
	git pull origin master

	# switch to the branch
	git checkout $1

	# start the rebase
	git rebase origin/master
}

function rebuild-func {
	# Rebuild codebase
	echo ////////////////////////////
	echo Rebuilding codebase started.
	echo ////////////////////////////
	gohome-func;
	# ...
	echo /////////////////////////////
	echo Rebuilding codebase finished.
	echo /////////////////////////////
	# Restart webserver
	echo ////////////////////////////////
	echo Shutting down webserver started.
	echo ////////////////////////////////
	shutdown.sh
	echo /////////////////////////////////
	echo Shutting down webserver finished.
	echo /////////////////////////////////
	echo
	echo //////////////////////////////
	echo Starting up webserver started.
	echo //////////////////////////////
	startup.sh
	echo ///////////////////////////////
	echo Starting up webserver finished.
	echo ///////////////////////////////
}

function fullbuild-func {
        # Rebuild
	rebuild-func;
	# Refresh data in DB
	refreshdb-func;
}

function refreshdb-func {
	echo /////////////////////////
	echo Rebuild databases started.
	echo /////////////////////////
	~/larskristian.net/database/build.sh ~/larskristian.net/environment/localcfg/db_username ~/larskristian.net/environment/localcfg/db_password
	echo //////////////////////////
	echo Rebuild databases finished.
	echo //////////////////////////
	echo 
	echo ////////////////////////////
	echo Bootstrap databases started.
	echo ////////////////////////////
	~/larskristian.net/database/bootstrap.sh ~/larskristian.net/environment/localcfg/db_username ~/larskristian.net/environment/localcfg/db_password
	echo /////////////////////////////
	echo Bootstrap databases finished.
	echo /////////////////////////////
}

function gohome-func {
	cd ~/larskristian.net
}
